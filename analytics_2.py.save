import sqlite3
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from dateutil import parser
from matplotlib import style

# Connect to SQLite datbase
conn = sqlite3.connect('sensor.db')
cursor = conn.cursor()

def read_from_db():
	cursor.execute('SELECT * FROM sensor')
	data = cursor.fetchall()
	print(data)
	for row in data:
		print(row)

def graph_data():
	cursor.execute('SELECT * FROM sensor')
	data = cursor.fetchall()

	# Get current size
	fig_size = plt.rcParams["figure.figsize"]

	# Set figure width to 9 and height to 15
	fig_size[0] = 9
	fig_size[1] = 15

	plt.rcParams.update({'font.size': 10})
	plt.rcParams["figure.figsize"] = fig_size

	x = []
	y = []
	#colors = (0,0,0)
	#area = np.pi*3

	for row in data:
		x.append(row[0])
		y.append(row[1])
       # plt.plot(temperatures, values, '-')
	
	fig = plt.figure()
	plt.xlabel('x')
	plt.ylabel('y')
	plt.title('Scatter plot - Temperature data')
	plt.clf()
	plt.scatter(x,y)
	plt.plot(x,y)
	plt.draw()
	plt.show()
	print ("Graph generated!")
	fig.savefig('graph1.png')

read_from_db()
graph_data()
cursor.close()
conn.close()



